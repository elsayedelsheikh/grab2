<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4" main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <Sequence>
      <SubTree ID="PickStack" name="cube1"/>
      <SubTree ID="PickStack" name="cube0"/>
      <SubTree ID="PickStack" name="cube2"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="PickStack">
    <Sequence>
      <Script code=" retract_pose:='-0.34;-0.3;0.6;1.0;0.0;0.0;0.0' " />
      <SubTree ID="MoveTo" name="Retract Pose" target="{retract_pose}"/>
      <SubTree ID="Pick"/>
      <SubTree ID="MoveTo" name="Retract Pose" target="{retract_pose}"/>
      <SubTree ID="Stack"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="Pick">
    <Sequence>
      <GetGraspHardcoded pregrasp="{pregrasp_pose}" grasp="{grasp_pose}"/>
      <SubTree ID="MoveTo" target="{pregrasp_pose}"/>
      <!-- <Grip pose="0.04"/> -->
      <SubTree ID="MoveTo" target="{grasp_pose}"/>
      <!-- <Grip pose="0.02"/> -->
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="Stack">
    <Sequence>
      <SubTree ID="MoveTo" name="Pre-Stack Pose" target="0.34;-0.3;0.6;1.0;0.0;0.0;0.0"/>
      <!-- <Grip pose="0.04"/> -->
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="MoveTo">
    <Sequence>
      <Plan target_ik="{target}" trajectory="{trajectory_msg}"/>
      <Move trajectory="{trajectory_msg}"/>
    </Sequence>
  </BehaviorTree>

</root>
